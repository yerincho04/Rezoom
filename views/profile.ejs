<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-300 min-h-screen">

<!-- Header -->
<%- include('partials/header', { email: typeof email !== 'undefined' ? email : null }) %>

  <!-- Main content -->
  <main class="max-w-5xl mx-auto p-8 space-y-8">

<!-- Profile Card + Sign Out -->
<div class="bg-white p-6 rounded-lg shadow flex justify-between items-center">
  
  <!-- Profile Info -->
  <div class="flex items-center space-x-6">
    <div class="w-24 h-24 rounded-full bg-yellow-600 flex items-center justify-center text-white text-2xl font-bold">
      <%= user.profile?.name?.charAt(0).toUpperCase() || "U" %>
    </div>
    <div>
      <h1 class="text-xl font-bold"><%= user.profile?.name || "Your Name" %></h1>
      <p class="text-sm text-gray-500"><%= email %></p>
    </div>
  </div>

  <!-- Sign Out Button -->
  <form action="/logout" method="POST">
    <button type="submit" class="bg-gray-300 text-black px-6 py-2 rounded hover:bg-gray-400">
      Sign Out
    </button>
  </form>

</div>

    <!-- Resume History -->
    <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-bold mb-4">자소서 History</h2>
    <table class="w-full text-sm table-fixed border-separate border-spacing-y-2">
        <thead>
        <tr>
            <th class="text-left px-4 py-2">기업</th>
            <th class="text-left px-4 py-2">Feedback</th>
        </tr>
        </thead>
        <tbody>
        <% feedbackHistory.forEach(fb => { %>
            <tr class="border-t border-b border-gray-200">
            <td class="px-4 py-2"><%= fb.company %></td>
            <td class="px-4 py-2">
                <a href="/feedback/view/<%= fb.id %>" class="text-blue-600 hover:underline">Feedback + To-do list 보기</a>
            </td>
            </tr>
        <% }); %>
        </tbody>
    </table>
    </div>

  </main>
</body>
</html>
